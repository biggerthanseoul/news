<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>영어 단어 학습 앱</title>
    <style>
        :root {
            --meaning-bg: #2c3e50;
            --meaning-dark: #22303f;
            --light-gray: #ecf0f1;
            --text-gray: #7f8c8d;
        }
        * { box-sizing: border-box; margin: 0; padding: 0; font-family: 'Segoe UI', 'Noto Sans KR', sans-serif; }
        body { background-color: #f5f5f5; color: #333; line-height: 1.6; }
        .container { max-width: 1000px; margin: 0 auto; padding: 20px; }
        header { text-align: center; margin-bottom: 20px; }
        h1 { font-size: 2rem; color: #2c3e50; margin-bottom: 10px; }
        .lang-tabs { text-align: center; margin-bottom: 20px; }
        .lang-btn { padding: 8px 16px; margin: 0 5px; border: none; border-radius: 5px; cursor: pointer; font-size: 0.9rem; }
        .lang-btn.active { background-color: var(--meaning-bg); color: white; }
        .lang-btn:not(.active) { background-color: var(--light-gray); color: var(--text-gray); }
        .instructions { text-align: center; margin: 0 0 20px; color: var(--text-gray); font-size: 0.9rem; }
        .chapter-container { margin-bottom: 40px; }
        .chapter-title { background-color: var(--meaning-bg); color: white; padding: 10px 15px; border-radius: 5px; margin-bottom: 15px; font-size: 1.2rem; cursor: pointer; display: flex; justify-content: space-between; align-items: center; }
        .chapter-title:hover { background-color: var(--meaning-dark); }
        .chapter-toggle { font-size: 1.2rem; }
        .words-container { display: flex; flex-wrap: wrap; gap: 15px; overflow: hidden; max-height: 0; transition: max-height 0.3s ease-out; }
        .words-container.expanded { max-height: 5000px; transition: max-height 0.5s ease-in; }
        .word-card { width: calc(33.333% - 10px); height: 200px; border-radius: 10px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); background-color: white; overflow: hidden; position: relative; perspective: 1000px; cursor: pointer; }
        @media (max-width: 768px) { .word-card { width: calc(50% - 10px); } }
        @media (max-width: 480px) { .word-card { width: 100%; } }
        .card-slider { width: 300%; height: 100%; display: flex; transition: transform 0.3s ease; }
        .card-face { width: 33.333%; height: 100%; display: flex; justify-content: center; align-items: center; padding: 20px; text-align: center; }
        .word-face { background-color: #fff; color: #2c3e50; }
        .pronunciation-face { background-color: var(--light-gray); color: var(--text-gray); font-family: 'Arial', sans-serif; }
        .meaning-face { background-color: var(--meaning-bg); color: white; }
        .word-text { font-size: 1.5rem; font-weight: bold; }
        .pronunciation-text { font-size: 1.3rem; font-style: italic; }
        .meaning-text { font-size: 1.3rem; }
        .navigation { position: absolute; bottom: 10px; width: 100%; display: flex; justify-content: center; gap: 8px; }
        .nav-dot { width: 8px; height: 8px; border-radius: 50%; background-color: #bdc3c7; cursor: pointer; }
        .nav-dot.active { background-color: var(--meaning-bg); }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>영어 단어 학습 앱</h1>
        </header>
        <div class="lang-tabs">
            <button class="lang-btn active" data-face="0">English</button>
            <button class="lang-btn" data-face="2">한글</button>
        </div>
        <p class="instructions">
            • 언어 탭 클릭해 기본 표시 면(단어/의미) 선택<br>
            • 카드 클릭 시 영어 단어(face=0)에서만 원어민 목소리로 발음 재생됩니다
        </p>
        <div id="chapters-list"><div class="loading">데이터 로딩 중...</div></div>
    </div>
    <script>
        let defaultFaceIndex = 0;
        const vocabData = [
            { title: "Unit 1: Special Days", words: [
                { word: "Valentine's Day", pronunciation: "/ˈvæləntaɪnz deɪ/", meaning: "발렌타인 데이" },
                { word: "Earth Day", pronunciation: "/ɜːrθ deɪ/", meaning: "지구의 날" },
                { word: "Mother's Day", pronunciation: "/ˈmʌðərz deɪ/", meaning: "어머니의 날" },
                { word: "Thanksgiving", pronunciation: "/ˌθæŋksˈɡɪvɪŋ/", meaning: "추수감사절" },
                { word: "Halloween", pronunciation: "/ˌhæləˈwiːn/", meaning: "할로윈" },
                { word: "Christmas Day", pronunciation: "/ˈkrɪsməs deɪ/", meaning: "크리스마스" },
                { word: "favorite", pronunciation: "/ˈfeɪvərɪt/", meaning: "가장 좋아하는" },
                { word: "day", pronunciation: "/deɪ/", meaning: "날" },
                { word: "my", pronunciation: "/maɪ/", meaning: "나의" },
                { word: "his", pronunciation: "/hɪz/", meaning: "그의" },
                { word: "her", pronunciation: "/hɜːr/", meaning: "그녀의" },
                { word: "what", pronunciation: "/wɑːt/", meaning: "무엇" },
                { word: "look", pronunciation: "/lʊk/", meaning: "보다" },
                { word: "number", pronunciation: "/ˈnʌmbər/", meaning: "번호" },
                { word: "decode", pronunciation: "/diːˈkoʊd/", meaning: "해독하다" },
                { word: "write", pronunciation: "/raɪt/", meaning: "쓰다" },
                { word: "read", pronunciation: "/riːd/", meaning: "읽다" },
                { word: "match", pronunciation: "/mætʃ/", meaning: "짝짓다" },
                { word: "circle", pronunciation: "/ˈsɜːrkl/", meaning: "동그라미 치다" },
                { word: "make", pronunciation: "/meɪk/", meaning: "만들다" },
                { word: "cards", pronunciation: "/kɑːrdz/", meaning: "카드" },
                { word: "plant", pronunciation: "/plænt/", meaning: "심다" },
                { word: "trees", pronunciation: "/triːz/", meaning: "나무" },
                { word: "wear", pronunciation: "/wer/", meaning: "입다" },
                { word: "a", pronunciation: "/ə/, /eɪ/", meaning: "하나의" },
                { word: "costume", pronunciation: "/ˈkɑːstuːm/", meaning: "의상" },
                { word: "give", pronunciation: "/ɡɪv/", meaning: "주다" },
                { word: "presents", pronunciation: "/ˈprezənts/", meaning: "선물" },
                { word: "eat", pronunciation: "/iːt/", meaning: "먹다" },
                { word: "turkey", pronunciation: "/ˈtɜːrki/", meaning: "칠면조" },
                { word: "hug", pronunciation: "/hʌɡ/", meaning: "안다" },
                { word: "mom", pronunciation: "/mɑːm/", meaning: "엄마" },
                { word: "open", pronunciation: "/ˈoʊpən/", meaning: "열다" },
                { word: "connect", pronunciation: "/kəˈnekt/", meaning: "연결하다" },
                { word: "do", pronunciation: "/duː/", meaning: "하다" },
                { word: "you", pronunciation: "/juː/", meaning: "너" },
                { word: "on", pronunciation: "/ɑːn/", meaning: "~에" },
                { word: "does", pronunciation: "/dʌz/", meaning: "~한다" },
                { word: "he", pronunciation: "/hiː/", meaning: "그" },
                { word: "I", pronunciation: "/aɪ/", meaning: "나" },
                { word: "and", pronunciation: "/ænd/", meaning: "그리고" },
                { word: "story", pronunciation: "/ˈstɔːri/", meaning: "이야기" },
                { word: "looking at", pronunciation: "/ˈlʊkɪŋ æt/", meaning: "~을 보고 있는" },
                { word: "calendar", pronunciation: "/ˈkælɪndər/", meaning: "달력" },
                { word: "what's", pronunciation: "/wɑːts/", meaning: "무엇이 ~이니" },
                { word: "why", pronunciation: "/waɪ/", meaning: "왜" },
                { word: "is", pronunciation: "/ɪz/", meaning: "~이다" },
                { word: "there", pronunciation: "/ðer/", meaning: "거기에" },
                { word: "special", pronunciation: "/ˈspeʃəl/", meaning: "특별한" },
                { word: "reason", pronunciation: "/ˈriːzən/", meaning: "이유" },
                { word: "lots of", pronunciation: "/lɑːts əv/", meaning: "많은" },
                { word: "chocolate", pronunciation: "/ˈtʃɑːklət/", meaning: "초콜릿" },
                { word: "then", pronunciation: "/ðen/", meaning: "그때" },
                { word: "I'm", pronunciation: "/aɪm/", meaning: "나는 ~이다" },
                { word: "very", pronunciation: "/ˈveri/", meaning: "매우" },
                { word: "popular", pronunciation: "/ˈpɑːpjələr/", meaning: "인기 있는" },
                { word: "coming soon", pronunciation: "/ˈkʌmɪŋ suːn/", meaning: "곧 다가오는" },
                { word: "excited", pronunciation: "/ɪkˈsaɪtɪd/", meaning: "신이 난, 흥분한" },
                { word: "so", pronunciation: "/soʊ/", meaning: "매우" },
                { word: "am", pronunciation: "/æm/", meaning: "~이다" },
                { word: "TRUE", pronunciation: "/truː/", meaning: "참" },
                { word: "FALSE", pronunciation: "/fɔːls/", meaning: "거짓" },
                { word: "wrap up", pronunciation: "/ræp ʌp/", meaning: "마무리하다" },
                { word: "follow", pronunciation: "/ˈfɑːloʊ/", meaning: "따르다" },
                { word: "check", pronunciation: "/tʃek/", meaning: "확인하다" }
            ]},
            { title: "Unit 2: Today's Weather", words: [
                { word: "snowy", pronunciation: "/ˈsnoʊi/", meaning: "눈이 내리는" },
                { word: "rainy", pronunciation: "/ˈreɪni/", meaning: "비가 내리는" },
                { word: "sunny", pronunciation: "/ˈsʌni/", meaning: "맑은, 해가 비치는" },
                { word: "cloudy", pronunciation: "/ˈklaʊdi/", meaning: "구름 낀" },
                { word: "foggy", pronunciation: "/ˈfɑːɡi/", meaning: "안개 낀" },
                { word: "windy", pronunciation: "/ˈwɪndi/", meaning: "바람이 부는" },
                { word: "weather", pronunciation: "/ˈweðər/", meaning: "날씨" },
                { word: "today", pronunciation: "/təˈdeɪ/", meaning: "오늘" },
                { word: "how", pronunciation: "/haʊ/", meaning: "어떻게" },
                { word: "how's", pronunciation: "/haʊz/", meaning: "어떻게 ~이니" },
                { word: "it's", pronunciation: "/ɪts/", meaning: "그것은 ~이다" },
                { word: "have", pronunciation: "/hæv/", meaning: "가지다" },
                { word: "a", pronunciation: "/ə/, /eɪ/", meaning: "하나의" },
                { word: "unscramble", pronunciation: "/ʌnˈskræmbəl/", meaning: "순서 바로잡기" },
                { word: "trace", pronunciation: "/treɪs/", meaning: "본따서 쓰다" },
                { word: "birthday", pronunciation: "/ˈbɜːrθdeɪ/", meaning: "생일" },
                { word: "date", pronunciation: "/deɪt/", meaning: "날짜" },
                { word: "when", pronunciation: "/wen/", meaning: "언제" },
                { word: "your", pronunciation: "/jɔːr/", meaning: "너의" },
                { word: "in", pronunciation: "/ɪn/", meaning: "~안에" },
                { word: "Sydney", pronunciation: "/ˈsɪdni/", meaning: "시드니" },
                { word: "mom", pronunciation: "/mɑːm/", meaning: "엄마" },
                { word: "what's", pronunciation: "/wɑːts/", meaning: "무엇이 ~이니" },
                { word: "June", pronunciation: "/dʒuːn/", meaning: "6월" },
                { word: "September", pronunciation: "/sɛpˈtɛmbər/", meaning: "9월" },
                { word: "April", pronunciation: "/ˈeɪprəl/", meaning: "4월" },
                { word: "TV", pronunciation: "/ˌtiː ˈviː/", meaning: "텔레비전" },
                { word: "says", pronunciation: "/sez/", meaning: "말하다" },
                { word: "uh-oh", pronunciation: "/ʌ oʊ/", meaning: "어머나" },
                { word: "really", pronunciation: "/ˈriːəli/", meaning: "정말로" },
                { word: "hard", pronunciation: "/hɑːrd/", meaning: "세게" },
                { word: "where", pronunciation: "/wer/", meaning: "어디에" },
                { word: "going", pronunciation: "/ˈɡoʊɪŋ/", meaning: "가고 있는" },
                { word: "to", pronunciation: "/tuː/", meaning: "~로" },
                { word: "gift shop", pronunciation: "/ɡɪft ʃɑːp/", meaning: "선물 가게" },
                { word: "buy", pronunciation: "/baɪ/", meaning: "사다" },
                { word: "mug", pronunciation: "/mʌɡ/", meaning: "머그컵" },
                { word: "for", pronunciation: "/fɔːr/", meaning: "~를 위해" },
                { word: "oh no", pronunciation: "/oʊ noʊ/", meaning: "이런" },
                { word: "umbrella", pronunciation: "/ʌmˈbrelə/", meaning: "우산" },
                { word: "already", pronunciation: "/ɔːlˈredi/", meaning: "이미" },
                { word: "gave", pronunciation: "/ɡeɪv/", meaning: "주었다" },
                { word: "present", pronunciation: "/ˈprezənt/", meaning: "선물" },
                { word: "find", pronunciation: "/faɪnd/", meaning: "찾다" },
                { word: "January", pronunciation: "/ˈdʒænjueri/", meaning: "1월" },
                { word: "February", pronunciation: "/ˈfebrueri/", meaning: "2월" },
                { word: "March", pronunciation: "/mɑːrtʃ/", meaning: "3월" },
                { word: "May", pronunciation: "/meɪ/", meaning: "5월" },
                { word: "July", pronunciation: "/dʒuˈlaɪ/", meaning: "7월" },
                { word: "August", pronunciation: "/ˈɔːɡəst/", meaning: "8월" },
                { word: "October", pronunciation: "/ɑːkˈtoʊbər/", meaning: "10월" },
                { word: "November", pronunciation: "/noʊˈvembər/", meaning: "11월" },
                { word: "December", pronunciation: "/dɪˈsembər/", meaning: "12월" },
                { word: "Seoul", pronunciation: "/soʊl/", meaning: "서울" },
                { word: "New York", pronunciation: "/nuː jɔːrk/", meaning: "뉴욕" },
                { word: "Paris", pronunciation: "/ˈpærɪs/", meaning: "파리" }

            ]},
            { title: "Unit 2: Today's Weather", words: [
                { word: "snowy", pronunciation: "/ˈsnoʊi/", meaning: "눈이 내리는" },
                { word: "rainy", pronunciation: "/ˈreɪni/", meaning: "비가 내리는" },
                { word: "sunny", pronunciation: "/ˈsʌni/", meaning: "맑은, 해가 비치는" },
                { word: "cloudy", pronunciation: "/ˈklaʊ디/", meaning: "구름 낀" },
                { word: "foggy", pronunciation: "/ˈfɑːɡi/", meaning: "안개 낀" }
            ]}
        ];

        function resetAllCards() {
            document.querySelectorAll('.word-card').forEach(card => {
                const slider = card.querySelector('.card-slider');
                const nav = card.querySelector('.navigation');
                slider.style.transform = `translateX(-${defaultFaceIndex * 33.333}%)`;
                nav.querySelectorAll('.nav-dot').forEach((d, i) => d.classList.toggle('active', i === defaultFaceIndex));
            });
        }

        document.querySelectorAll('.lang-btn').forEach(btn => {
            btn.addEventListener('click', () => {
                document.querySelectorAll('.lang-btn').forEach(b => b.classList.remove('active'));
                btn.classList.add('active');
                defaultFaceIndex = parseInt(btn.dataset.face);
                initializeApp();
            });
        });

        function initializeApp() {
            const container = document.getElementById('chapters-list');
            container.innerHTML = '';
            vocabData.forEach((chapter, idx) => {
                const chapDiv = document.createElement('div'); chapDiv.className = 'chapter-container';
                const title = document.createElement('div'); title.className = 'chapter-title';
                title.innerHTML = `<span>${chapter.title}</span><span class=\"chapter-toggle\">▼</span>`;
                const wordsDiv = document.createElement('div'); wordsDiv.className = 'words-container';
                if (idx === 0) { wordsDiv.classList.add('expanded'); title.querySelector('.chapter-toggle').textContent = '▲'; }
                chapter.words.forEach(word => wordsDiv.appendChild(createWordCard(word)));
                title.addEventListener('click', () => {
                    wordsDiv.classList.toggle('expanded');
                    title.querySelector('.chapter-toggle').textContent = wordsDiv.classList.contains('expanded') ? '▲' : '▼';
                });
                chapDiv.append(title, wordsDiv); container.append(chapDiv);
            });
        }

        // Select English voice explicitly
        function getEnglishVoice() {
            const voices = window.speechSynthesis.getVoices();
            return voices.find(v => v.lang.startsWith('en')) || null;
        }

        function createWordCard(data) {
            const card = document.createElement('div'); card.className = 'word-card';
            const slider = document.createElement('div'); slider.className = 'card-slider';
            let currentIndex = defaultFaceIndex;
            const faces = [
                { cls: 'word-face', text: data.word },
                { cls: 'pronunciation-face', text: data.pronunciation },
                { cls: 'meaning-face', text: data.meaning }
            ];
            faces.forEach(face => {
                const div = document.createElement('div'); div.className = `card-face ${face.cls}`;
                div.innerHTML = `<div class=\"${face.cls.replace('-face','')}-text\">${face.text}</div>`;
                slider.appendChild(div);
            });
            slider.style.transform = `translateX(-${currentIndex * 33.333}%)`;
            const nav = document.createElement('div'); nav.className = 'navigation';
            faces.forEach((_, i) => {
                const dot = document.createElement('div');
                dot.className = i === currentIndex ? 'nav-dot active' : 'nav-dot'; dot.dataset.idx = i;
                dot.addEventListener('click', e => {
                    e.stopPropagation();
                    resetAllCards();
                    currentIndex = i;
                    slider.style.transform = `translateX(-${i * 33.333}%)`;
                    nav.querySelectorAll('.nav-dot').forEach((d, di) => d.classList.toggle('active', di === i));
                    // TTS: only for face index 0
                    if ('speechSynthesis' in window && currentIndex === 0) {
                        const utter = new SpeechSynthesisUtterance(faces[currentIndex].text);
                        utter.lang = 'en-US';
                        const enVoice = getEnglishVoice(); if (enVoice) utter.voice = enVoice;
                        speechSynthesis.speak(utter);
                    }
                });
                nav.appendChild(dot);
            });
            card.append(slider, nav);
            card.addEventListener('click', () => {
                resetAllCards();
                currentIndex = (currentIndex + 1) % faces.length;
                slider.style.transform = `translateX(-${currentIndex * 33.333}%)`;
                nav.querySelectorAll('.nav-dot').forEach((d, di) => d.classList.toggle('active', di === currentIndex));
                // TTS: only for face index 0
                if ('speechSynthesis' in window && currentIndex === 0) {
                    const utter = new SpeechSynthesisUtterance(faces[currentIndex].text);
                    utter.lang = 'en-US';
                    const enVoice = getEnglishVoice(); if (enVoice) utter.voice = enVoice;
                    speechSynthesis.speak(utter);
                }
            });
            return card;
        }

        // Ensure voices are loaded
        window.speechSynthesis.onvoiceschanged = () => {};

        document.addEventListener('DOMContentLoaded', initializeApp);
    </script>
</body>
</html>
