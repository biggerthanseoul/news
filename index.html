<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>영어 단어 학습 앱</title>
    <style>
        :root {
            --meaning-bg: #2c3e50;
            --meaning-dark: #22303f;
            --light-gray: #ecf0f1;
            --text-gray: #7f8c8d;
        }
        * { box-sizing: border-box; margin: 0; padding: 0; font-family: 'Segoe UI', 'Noto Sans KR', sans-serif; }
        body { background-color: #f5f5f5; color: #333; line-height: 1.6; }
        .container { max-width: 1000px; margin: 0 auto; padding: 20px; }
        header { text-align: center; margin-bottom: 20px; }
        h1 { font-size: 2rem; color: #2c3e50; margin-bottom: 10px; }
        .lang-tabs { text-align: center; margin-bottom: 20px; }
        .lang-btn { padding: 8px 16px; margin: 0 5px; border: none; border-radius: 5px; cursor: pointer; font-size: 0.9rem; }
        .lang-btn.active { background-color: var(--meaning-bg); color: white; }
        .lang-btn:not(.active) { background-color: var(--light-gray); color: var(--text-gray); }
        .instructions { text-align: center; margin: 0 0 20px; color: var(--text-gray); font-size: 0.9rem; }
        .chapter-container { margin-bottom: 40px; }
        .chapter-title { background-color: var(--meaning-bg); color: white; padding: 10px 15px; border-radius: 5px; margin-bottom: 15px; font-size: 1.2rem; cursor: pointer; display: flex; justify-content: space-between; align-items: center; }
        .chapter-title:hover { background-color: var(--meaning-dark); }
        .chapter-toggle { font-size: 1.2rem; }
        .words-container { display: flex; flex-wrap: wrap; gap: 15px; overflow: hidden; max-height: 0; transition: max-height 0.3s ease-out; }
        .words-container.expanded { max-height: 5000px; transition: max-height 0.5s ease-in; }
        .word-card { width: calc(33.333% - 10px); height: 200px; border-radius: 10px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); background-color: white; overflow: hidden; position: relative; perspective: 1000px; cursor: pointer; }
        @media (max-width: 768px) { .word-card { width: calc(50% - 10px); } }
        @media (max-width: 480px) { .word-card { width: 100%; } }
        .card-slider { width: 300%; height: 100%; display: flex; transition: transform 0.3s ease; }
        .card-face { width: 33.333%; height: 100%; display: flex; justify-content: center; align-items: center; padding: 20px; text-align: center; }
        .word-face { background-color: #fff; color: #2c3e50; }
        .pronunciation-face { background-color: var(--light-gray); color: var(--text-gray); font-family: 'Arial', sans-serif; }
        .meaning-face { background-color: var(--meaning-bg); color: white; }
        .word-text { font-size: 1.5rem; font-weight: bold; }
        .pronunciation-text { font-size: 1.3rem; font-style: italic; }
        .meaning-text { font-size: 1.3rem; }
        .navigation { position: absolute; bottom: 10px; width: 100%; display: flex; justify-content: center; gap: 8px; }
        .nav-dot { width: 8px; height: 8px; border-radius: 50%; background-color: #bdc3c7; cursor: pointer; }
        .nav-dot.active { background-color: var(--meaning-bg); }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>영어 단어 학습 앱</h1>
        </header>
        <div class="lang-tabs">
            <button class="lang-btn active" data-face="0">English</button>
            <button class="lang-btn" data-face="2">한글</button>
        </div>
        <p class="instructions">
            • 언어 탭 클릭해 기본 표시 면(단어/의미) 선택<br>
            • 카드 클릭 시 영어 단어(face=0)만 원어민 목소리로 발음 재생됩니다
        </p>
        <div id="chapters-list"><div class="loading">데이터 로딩 중...</div></div>
    </div>
    <script>
        let defaultFaceIndex = 0;
        const vocabData = [
            { title: "Unit 1: Special Days", words: [
                { word: "Valentine's Day", pronunciation: "/ˈvæləntaɪnz deɪ/", meaning: "발렌타인 데이" },
                { word: "Earth Day", pronunciation: "/ɜːrθ deɪ/", meaning: "지구의 날" },
                { word: "Mother's Day", pronunciation: "/ˈmʌðərz deɪ/", meaning: "어머니의 날" },
                { word: "Thanksgiving", pronunciation: "/ˌθæŋksˈɡɪvɪŋ/", meaning: "추수감사절" },
                { word: "Halloween", pronunciation: "/ˌhæləˈwiːn/", meaning: "할로윈" }
            ]},
            { title: "Unit 2: Today's Weather", words: [
                { word: "snowy", pronunciation: "/ˈsnoʊi/", meaning: "눈이 내리는" },
                { word: "rainy", pronunciation: "/ˈreɪ니/", meaning: "비가 내리는" },
                { word: "sunny", pronunciation: "/ˈsʌ니/", meaning: "맑은, 해가 비치는" },
                { word: "cloudy", pronunciation: "/ˈklaʊ디/", meaning: "구름 낀" },
                { word: "foggy", pronunciation: "/ˈfɑːɡi/", meaning: "안개 낀" }
            ]}
        ];

        function resetAllCards() {
            document.querySelectorAll('.word-card').forEach(card => {
                const slider = card.querySelector('.card-slider');
                const nav = card.querySelector('.navigation');
                slider.style.transform = `translateX(-${defaultFaceIndex * 33.333}%)`;
                nav.querySelectorAll('.nav-dot').forEach((d, i) => d.classList.toggle('active', i === defaultFaceIndex));
            });
        }

        document.querySelectorAll('.lang-btn').forEach(btn => {
            btn.addEventListener('click', () => {
                document.querySelectorAll('.lang-btn').forEach(b => b.classList.remove('active'));
                btn.classList.add('active');
                defaultFaceIndex = parseInt(btn.dataset.face);
                initializeApp();
            });
        });

        function initializeApp() {
            const container = document.getElementById('chapters-list');
            container.innerHTML = '';
            vocabData.forEach((chapter, idx) => {
                const chapDiv = document.createElement('div'); chapDiv.className = 'chapter-container';
                const title = document.createElement('div'); title.className = 'chapter-title';
                title.innerHTML = `<span>${chapter.title}</span><span class="chapter-toggle">▼</span>`;
                const wordsDiv = document.createElement('div'); wordsDiv.className = 'words-container';
                if (idx === 0) { wordsDiv.classList.add('expanded'); title.querySelector('.chapter-toggle').textContent = '▲'; }
                chapter.words.forEach(word => wordsDiv.appendChild(createWordCard(word)));
                title.addEventListener('click', () => {
                    wordsDiv.classList.toggle('expanded');
                    title.querySelector('.chapter-toggle').textContent = wordsDiv.classList.contains('expanded') ? '▲' : '▼';
                });
                chapDiv.append(title, wordsDiv); container.append(chapDiv);
            });
        }

        function createWordCard(data) {
            const card = document.createElement('div'); card.className = 'word-card';
            const slider = document.createElement('div'); slider.className = 'card-slider';
            let currentIndex = defaultFaceIndex;
            const faces = [
                { cls: 'word-face', text: data.word },
                { cls: 'pronunciation-face', text: data.pronunciation },
                { cls: 'meaning-face', text: data.meaning }
            ];
            faces.forEach(face => {
                const div = document.createElement('div'); div.className = `card-face ${face.cls}`;
                div.innerHTML = `<div class=\"${face.cls.replace('-face','')}-text\">${face.text}</div>`;
                slider.appendChild(div);
            });
            slider.style.transform = `translateX(-${currentIndex * 33.333}%)`;
            const nav = document.createElement('div'); nav.className = 'navigation';
            faces.forEach((_, i) => {
                const dot = document.createElement('div');
                dot.className = i === currentIndex ? 'nav-dot active' : 'nav-dot'; dot.dataset.idx = i;
                dot.addEventListener('click', e => {
                    e.stopPropagation(); resetAllCards(); currentIndex = i; slider.style.transform = `translateX(-${i * 33.333}%)`;
                    nav.querySelectorAll('.nav-dot').forEach((d, di) => d.classList.toggle('active', di === i));
                    // TTS: only for face index 0
                    if ('speechSynthesis' in window && currentIndex === 0) {
                        const utter = new SpeechSynthesisUtterance(faces[currentIndex].text);
                        utter.lang = 'en-US'; speechSynthesis.speak(utter);
                    }
                });
                nav.appendChild(dot);
            });
            card.append(slider, nav);
            card.addEventListener('click', () => {
                resetAllCards(); currentIndex = (currentIndex + 1) % faces.length; slider.style.transform = `translateX(-${currentIndex * 33.333}%)`;
                nav.querySelectorAll('.nav-dot').forEach((d, di) => d.classList.toggle('active', di === currentIndex));
                // TTS: only for face index 0
                if ('speechSynthesis' in window && currentIndex === 0) {
                    const utter = new SpeechSynthesisUtterance(faces[currentIndex].text);
                    utter.lang = 'en-US'; speechSynthesis.speak(utter);
                }
            });
            return card;
        }

        document.addEventListener('DOMContentLoaded', initializeApp);
    </script>
</body>
</html>
